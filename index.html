<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Custom Video Player</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #container {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* --- MENU BUTTONS --- */
    #menu {
        position: absolute;
        bottom: 10%;
        left: 50%;
        transform: translateX(-50%); 
        width: 90%;
        display: flex;
        justify-content: space-evenly; 
        align-items: center; 
        z-index: 10;
        transition: opacity 1s ease-out; 
    }

    /* --- GLOBAL CONTROL STYLES (Volume, Play/Pause & Fullscreen) --- */
    .control-btn, #volumeSlider {
        position: absolute;
        z-index: 11;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.4);
        color: white;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-family: Arial, sans-serif;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        transition: background 0.2s, opacity 0.3s;
        opacity: 0.4; 
    }
    .control-btn:hover, #volumeSlider:hover {
        background: rgba(255, 255, 255, 0.4);
        opacity: 1; 
    }

    /* --- VOLUME BUTTON (POJOK KIRI ATAS) --- */
    #volumeBtn {
        top: 20px;
        left: 20px; 
        font-size: 1.5rem; 
    }

    /* --- PLAY/PAUSE BUTTON (DI BAWAH VOLUME) --- */
    #playPauseBtn {
        top: 80px; 
        left: 20px;
        font-size: 1.5rem;
    }
    
    /* --- VOLUME SLIDER --- */
    #volumeSlider {
        top: 20px;
        left: 80px; 
        width: 100px;
        height: auto;
        padding: 10px 5px;
        display: none; 
    }

    /* --- FULLSCREEN BUTTON (POJOK KANAN ATAS) --- */
    #fullscreenBtn {
        top: 20px;
        right: 20px;
        font-size: 1.5rem; 
    }

    /* --- TOMBOL REFRESH BARU (DI BAWAH FULLSCREEN) --- */
    #refreshBtn {
        top: 80px; /* 20px (Fullscreen) + 60px (Jarak) */
        right: 20px;
        font-size: 1.5rem;
    }
    
    /* KEYFRAMES UNTUK CAHAYA HIJAU KONSTAN (Digunakan saat tombol ditekan sekali) */
    @keyframes glow-green-subtle {
        0%, 100% {
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.7), 0 0 20px rgba(0, 255, 0, 0.5);
        }
        50% {
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.9), 0 0 30px rgba(0, 255, 0, 0.8);
        }
    }

    /* KEYFRAMES BARU UNTUK EFEK KELAP-KELIP MERAH HIJAU (saat semua ditekan) */
    @keyframes flash-red-green {
        0%, 100% {
            background: radial-gradient(circle at 30% 30%, #ff6666, #cc0000 70%); 
            box-shadow: 
                0 0 10px rgba(255, 0, 0, 0.8), 
                0 0 20px rgba(255, 0, 0, 0.6);
        }
        50% {
            background: radial-gradient(circle at 30% 30%, #99ff99, #00cc00 70%); 
            box-shadow: 
                0 0 10px rgba(0, 255, 0, 0.8), 
                0 0 20px rgba(0, 255, 0, 0.6);
        }
    }

    /* KEYFRAMES BARU UNTUK EFEK GLOWING MERAH (saat tombol OFF) */
    @keyframes glow-red-subtle {
        0%, 100% {
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.7), 0 0 20px rgba(255, 0, 0, 0.5);
        }
        50% {
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.9), 0 0 30px rgba(255, 0, 0, 0.8);
        }
    }


    .btn-start {
        font-family: 'Poppins', sans-serif;
        font-size: 1.8vw; 
        max-width: 120px;
        max-height: 120px;
        max-font-size: 1.8rem; 
        font-weight: 800;
        
        color: rgba(255, 255, 255, 0.7); 
        text-shadow: 0 0 3px rgba(255, 255, 255, 0.5), 0 2px 4px rgba(0, 0, 0, 0.7); 
        
        width: 20vw;
        height: 20vw;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #ff6666, #cc0000 70%); 
        border: none; 
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: transform 0.15s ease-in-out, background 0.3s, box-shadow 0.3s, opacity 1s ease-out; 
        
        display: flex;
        justify-content: center;
        align-items: center;

        /* Animasi glowing merah default untuk tombol OFF */
        animation: glow-red-subtle 1.5s infinite ease-in-out;
    }

    .btn-start:active {
        transform: scale(0.88);
        box-shadow: 0 6px 12px rgba(0,0,0,0.5); 
        animation: none; 
    }

    /* Gaya untuk tombol yang sudah aktif (ditekan) - HIJAU GLOW */
    .btn-start.active {
        background: radial-gradient(circle at 30% 30%, #99ff99, #00cc00 70%); 
        animation: glow-green-subtle 1.5s infinite ease-in-out; 
        cursor: default; 
    }
    
    /* Gaya untuk 4 tombol yang sudah siap (saat semua ditekan) */
    .btn-start.final-ready {
        border: none; 
        animation: flash-red-green 0.3s steps(1) infinite; 
    }

    /* Hapus pseudo-element jika ada */
    .btn-start.final-ready::after {
        content: none; 
    }


    /* --- OVERLAY TRANSISI --- */
    #transitionOverlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        opacity: 0; 
        z-index: 100; 
        pointer-events: none; 
        transition: opacity 0.5s ease-in-out; 
    }
    #transitionOverlay.fade-in {
        opacity: 1; 
    }
    #transitionOverlay.fade-out {
        opacity: 0; 
    }

    /* Hide controls */
    video::-webkit-media-controls-timeline,
    video::-webkit-media-controls-volume-slider,
    video::-webkit-media-controls-mute-button {
        display: none !important;
    }

    video::-webkit-media-controls-panel {
        display: none !important;
        opacity: 0 !important;
    }


    /* --- TEKS "Gen-Z Preneur Launching Produk" --- */
    #productLaunchText {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); 
        color: rgba(255, 255, 255, 0.8); 
        font-family: 'Playfair Display', serif; 
        font-size: 4vw; 
        text-align: center;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.5); 
        z-index: 9; 
        opacity: 1; 
        transition: opacity 1s ease-out; 
        line-height: 1.2; 
        white-space: nowrap; 
    }

    /* Keyframes untuk animasi glowing teks */
    @keyframes text-glow {
        0%, 100% {
            text-shadow: 
                0 0 8px rgba(255, 255, 255, 0.7),
                0 0 15px rgba(255, 255, 255, 0.5),
                0 0 25px rgba(255, 255, 255, 0.3);
        }
        50% {
            text-shadow: 
                0 0 12px rgba(255, 255, 255, 0.9),
                0 0 25px rgba(255, 255, 255, 0.7),
                0 0 40px rgba(255, 255, 255, 0.5);
        }
    }

    #productLaunchText.glowing {
        animation: text-glow 2s ease-in-out infinite alternate; 
    }

    /* Keyframes untuk efek membesar dan fade hingga hilang */
    @keyframes text-zoom-fade {
        0% {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        100% {
            transform: translate(-50%, -50%) scale(2); 
            opacity: 0; 
        }
    }

    #productLaunchText.zoom-out-fade {
        animation: text-zoom-fade 1.5s ease-out forwards; 
        animation-delay: 0.5s; 
    }


    /* Sembunyikan teks saat transisi dimulai (override jika zoom-out-fade aktif) */
    #productLaunchText.fade-out {
        opacity: 0; 
        transition: opacity 0.5s ease-out; 
    }

</style>
</head>
<body>
<div id="container">
    <video id="introVideo" muted playsinline> 
        <source src="intro.mp4" type="video/mp4" />
    </video>

    <audio id="clickSound" src="click.mp3" preload="auto"></audio>
    <audio id="sirenSound" src="siren.mp3" preload="auto"></audio>

    <button id="volumeBtn" class="control-btn">&#128263;</button> 
    
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5" class="control-btn" style="padding: 10px 8px; border:none; background: rgba(0,0,0,0.5);">

    <button id="playPauseBtn" class="control-btn">&#9658;</button>

    <button id="fullscreenBtn" class="control-btn">&#x26F6;</button>

    <button id="refreshBtn" class="control-btn">&#x21BB;</button>

    <div id="productLaunchText" class="glowing">
        Gen-Z Preneur<br>Launching Produk
    </div>

    <div id="menu">
        <button class="btn-start" data-index="0">START</button>
        <button class="btn-start" data-index="1">START</button>
        <button class="btn-start" data-index="2">START</button>
        <button class="btn-start" data-index="3">START</button>
    </div>

<div id="transitionOverlay"></div>

    <video id="sampleVideo" style="display:none; position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover;" playsinline>
        <source src="sample.mp4" type="video/mp4" />
    </video>
</div>

<script>
let isMuted = true; 
let currentVolume = 0.5; 
let isPlaying = false; 

let startButtonsStatus = [false, false, false, false]; 
const totalStartButtons = 4;
let allButtonsPressedOnce = false; 

// Referensi Elemen
const clickSound = document.getElementById('clickSound');
const sirenSound = document.getElementById('sirenSound');
const introVideo = document.getElementById('introVideo');
const playPauseBtn = document.getElementById('playPauseBtn');
const productLaunchText = document.getElementById('productLaunchText'); 

// Fungsi pembantu untuk memainkan suara
function playSound(audioElement, volume = 1.0) {
    if (isMuted) return; 
    
    audioElement.currentTime = 0; 
    audioElement.volume = volume;
    audioElement.play().catch(e => console.log("Gagal memutar suara:", e));
}

// Fungsi untuk mengupdate ikon Play/Pause
function updatePlayPauseIcon() {
    playPauseBtn.innerHTML = isPlaying ? "&#10074;&#10074;" : "&#9658;"; 
}

function togglePlayPause() {
    if (introVideo.paused || introVideo.ended) {
        introVideo.play().then(() => {
            isPlaying = true;
            updatePlayPauseIcon();
        }).catch(e => console.error("Gagal memulai pemutaran:", e));
    } else {
        introVideo.pause();
        isPlaying = false;
        updatePlayPauseIcon();
    }
}

// Tambahan: Agar video intro berulang secara default saat tombol START belum ditekan
introVideo.addEventListener('ended', function() {
    if (!allButtonsPressedOnce) {
        introVideo.currentTime = 0;
        introVideo.play();
    }
});


function updateVolumeStatus() {
    const sampleVideo = document.getElementById("sampleVideo");
    const volumeBtn = document.getElementById("volumeBtn");
    const slider = document.getElementById("volumeSlider");

    sampleVideo.muted = isMuted;

    const volumeLevel = isMuted ? 0 : currentVolume;
    clickSound.volume = volumeLevel;
    sirenSound.volume = volumeLevel;


    if (!isMuted) {
        introVideo.muted = false; 
        introVideo.volume = currentVolume;
        
        if (currentVolume > 0.6) {
             volumeBtn.innerHTML = "&#128266;"; 
        } else if (currentVolume > 0) {
             volumeBtn.innerHTML = "&#128265;"; 
        } else {
             volumeBtn.innerHTML = "&#128263;"; 
        }
        slider.value = currentVolume;
    } else {
        introVideo.muted = true;
        introVideo.volume = 0; 
        volumeBtn.innerHTML = "&#128263;"; 
    }
}

function showVolumeSlider() {
    const slider = document.getElementById("volumeSlider");
    
    if (slider.style.display === 'block') {
        slider.style.display = 'none';
    } else {
        slider.style.display = 'block';
        if (isMuted) {
            isMuted = false;
        }
        updateVolumeStatus();
    }
}

function setVolume(volumeValue) {
    const volumeFloat = parseFloat(volumeValue);
    currentVolume = volumeFloat;
    isMuted = (volumeFloat === 0); 
    updateVolumeStatus();
}

function handleStartButtonClick(buttonIndex) {
    const startButtons = document.querySelectorAll(".btn-start");
    
    if (!startButtonsStatus[buttonIndex]) {
        playSound(clickSound, 0.8); 

        startButtonsStatus[buttonIndex] = true; 
        startButtons[buttonIndex].classList.add('active'); 
        startButtons[buttonIndex].classList.remove('glow-red-subtle'); 
        
        if (isMuted) { 
            isMuted = false;
            updateVolumeStatus(); 
        }
        
        if (!isPlaying && startButtonsStatus.filter(s => s).length === 1) {
            togglePlayPause(); 
        }

        const allButtonsPressed = startButtonsStatus.every(status => status === true);

        if (allButtonsPressed && !allButtonsPressedOnce) {
            allButtonsPressedOnce = true; 
            console.log("Semua tombol START ditekan! Memulai Sirine & Animasi Kelap-Kelip Merah-Hijau...");
            
            introVideo.muted = true;
            introVideo.volume = 0;
            
            playPauseBtn.style.display = 'none';

            // Hentikan animasi glowing teks dan mulai efek zoom in/out & fade
            if (productLaunchText) {
                productLaunchText.classList.remove('glowing'); 
                productLaunchText.classList.add('zoom-out-fade'); 
            }

            // Aktifkan Animasi Kelap-Kelip Merah-Hijau pada tombol
            startButtons.forEach(button => {
                button.classList.remove('active'); 
                button.classList.add('final-ready'); 
            });
            
            playSound(sirenSound);

            sirenSound.onended = function() {
                startTransition();
            };
            
            setTimeout(() => {
                if (!sirenSound.paused) {
                    sirenSound.pause();
                }
                startTransition();
            }, 5000); 
            
        } else if (!allButtonsPressed) {
            console.log(`Tombol START ${buttonIndex + 1} ditekan. Menunggu yang lain.`);
        }
    }
}

function startTransition() {
    const menu = document.getElementById("menu");
    const startButtons = document.querySelectorAll(".btn-start");
    const transitionOverlay = document.getElementById("transitionOverlay");
    const volumeBtn = document.getElementById("volumeBtn");
    const fullscreenBtn = document.getElementById("fullscreenBtn");
    const slider = document.getElementById("volumeSlider");
    const refreshBtn = document.getElementById("refreshBtn"); // Ambil ref. tombol refresh

    sirenSound.onended = null;
    
    menu.style.opacity = '0'; 
    startButtons.forEach(button => button.style.opacity = '0'); 
    volumeBtn.style.opacity = '0';
    fullscreenBtn.style.opacity = '0';
    refreshBtn.style.opacity = '0'; // Sembunyikan tombol refresh
    slider.style.display = 'none';
    
    if (productLaunchText) {
        productLaunchText.classList.add('fade-out'); 
    }


    transitionOverlay.style.pointerEvents = 'auto'; 
    transitionOverlay.classList.add('fade-in');

    setTimeout(() => {
        playSample(); 
        transitionOverlay.classList.remove('fade-in');
        transitionOverlay.classList.add('fade-out');
        transitionOverlay.style.pointerEvents = 'none'; 

        // Tampilkan kembali tombol kontrol setelah video sampel dimainkan
        volumeBtn.style.opacity = '0.7'; 
        fullscreenBtn.style.opacity = '0.7';
        refreshBtn.style.opacity = '0.7'; 

    }, 1000); 
}

function playSample() {
    const sampleVideo = document.getElementById("sampleVideo");

    introVideo.pause();
    introVideo.currentTime = 0; 
    introVideo.style.display = "none";
    
    sampleVideo.style.display = "block";

    sampleVideo.muted = isMuted; 
    if (!isMuted) {
        sampleVideo.volume = currentVolume;
    } else {
        sampleVideo.volume = 0; 
    }

    sampleVideo.play().catch(err => {
        console.error("Gagal memutar sample.mp4:", err);
    });
}

function toggleFullScreen() {
    const container = document.getElementById("container");
    
    if (!document.fullscreenElement) {
        if (container.requestFullscreen) {
            container.requestFullscreen();
        } else if (container.mozRequestFullScreen) { 
            container.mozRequestFullScreen();
        } else if (container.webkitRequestFullscreen) { 
            container.webkitRequestFullscreen();
        } else if (container.msRequestFullscreen) { 
            container.msRequestFullscreen();
        }
    } else {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.mozCancelFullScreen) { 
            document.mozCancelFullScreen();
        } else if (container.webkitExitFullscreen) { 
            container.webkitExitFullscreen();
        } else if (container.msExitFullscreen) { 
            container.msExitFullscreen();
        }
    }
}


// Inisialisasi Event Listeners
document.addEventListener('DOMContentLoaded', (event) => {
    const volumeBtn = document.getElementById("volumeBtn");
    const slider = document.getElementById("volumeSlider");
    const startButtons = document.querySelectorAll(".btn-start");
    const refreshBtn = document.getElementById("refreshBtn"); // Ambil ref. tombol refresh

    updatePlayPauseIcon(); 
    updateVolumeStatus(); 
    slider.value = currentVolume; 

    startButtons.forEach((button, index) => {
        button.setAttribute('data-index', index); 
        button.addEventListener('click', () => handleStartButtonClick(index));
    });

    playPauseBtn.addEventListener('click', togglePlayPause);
    
    introVideo.addEventListener('play', () => { isPlaying = true; updatePlayPauseIcon(); });
    introVideo.addEventListener('pause', () => { isPlaying = false; updatePlayPauseIcon(); });


    const fullscreenBtn = document.getElementById("fullscreenBtn");
    fullscreenBtn.addEventListener('click', toggleFullScreen);
    
    volumeBtn.addEventListener('click', showVolumeSlider); 
    slider.addEventListener('input', (e) => setVolume(e.target.value)); 

    // Event listener untuk tombol Refresh
    refreshBtn.addEventListener('click', () => {
        window.location.reload();
    });
});
</script>
</body>
</html>